var m=Object.defineProperty;var d=(e,t,r)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var s=(e,t,r)=>(d(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}})();function c(e){return e.reduce((t,r)=>(t[r]?t[r]++:t[r]=1,t),{})}function f(e){return e.valor!==null}class h{constructor(t){s(this,"transacoes");s(this,"total");s(this,"pagamento");s(this,"status");s(this,"semana");s(this,"melhorDia");this.transacoes=t,this.total=this.setTotal(),this.pagamento=this.setPagamento(),this.status=this.setStatus(),this.semana=this.setSemana(),this.melhorDia=this.setMelhorDia()}setTotal(){return this.transacoes.filter(f).reduce((t,r)=>t+r.valor,0)}setPagamento(){return c(this.transacoes.map(({pagamento:t})=>t))}setStatus(){return c(this.transacoes.map(({status:t})=>t))}setSemana(){const t={Domingo:0,Segunda:0,Terça:0,Quarta:0,Quinta:0,Sexta:0,Sábado:0};for(let r=0;r<this.transacoes.length;r++)switch(this.transacoes[r].data.getDay()){case 0:t.Domingo+=1;break;case 1:t.Segunda+=1;break;case 2:t.Terça+=1;break;case 3:t.Quarta+=1;break;case 4:t.Quinta+=1;break;case 5:t.Sexta+=1;break;case 6:t.Sábado+=1;break}return t}setMelhorDia(){return Object.entries(this.semana).sort((t,r)=>r[1]-t[1])[0]}}async function p(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Error: "+t.status);return await t.json()}catch(t){return t instanceof Error&&console.error("fetchData: "+t.message),null}}function g(e){const t=Number(e.split(".").join("").replace(",","."));return isNaN(t)?null:t}function y(e){const[t,r]=e.split(" "),[o,a,n]=t.split("/").map(Number),[i,l]=r.split(":").map(Number);return new Date(n,a-1,o,i,l)}function b(e){return{nome:e.Nome,id:e.ID,data:y(e.Data),status:e.Status,email:e.Email,moeda:e["Valor (R$)"],valor:g(e["Valor (R$)"]),pagamento:e["Forma de Pagamento"],novo:!!e["Cliente Novo"]}}async function S(){const e=await p("https://api.origamid.dev/json/transacoes.json?");if(!e)return;const t=e.map(b);E(t),D(t)}function u(e,t){const r=document.getElementById(t);r&&Object.keys(e).forEach(o=>{r.innerHTML+=`<p>${o}: ${e[o]}</p>`})}function D(e){const t=new h(e);u(t.pagamento,"pagamento"),u(t.status,"status");const r=document.querySelector("#total span");r&&(r.innerText=t.total.toLocaleString("pr-BR",{style:"currency",currency:"BRL"}));const o=document.querySelector("#dia span");o&&(o.innerText=t.melhorDia[0])}function E(e){const t=document.querySelector("#transacoes tbody");t&&e.forEach(r=>{t.innerHTML+=`
    <tr>
      <td>${r.nome}</td>
      <td>${r.email}</td>
      <td>R$ ${r.moeda}</td>
      <td>${r.pagamento}</td>
      <td>${r.status}</td>
    </tr>
    `})}S();
